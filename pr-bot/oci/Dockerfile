FROM alpine:latest

ENV PIPELINE_PARAM_GIO_ACTION=${PIPELINE_PARAM_GIO_ACTION}
ENV PIPELINE_PARAM_PR_BOT_IMAGE_TAG=${PIPELINE_PARAM_PR_BOT_IMAGE_TAG}
ENV PIPELINE_PARAM_IS_TRIGGERED_FROM_PR=${PIPELINE_PARAM_IS_TRIGGERED_FROM_PR}
ENV CIRCLE_PULL_REQUEST=${CIRCLE_PULL_REQUEST}
ENV CIRCLE_PULL_REQUESTS=${CIRCLE_PULL_REQUESTS}
ENV CIRCLE_PR_NUMBER=${CIRCLE_PR_NUMBER}
ENV CIRCLE_PR_REPONAME=${CIRCLE_PR_REPONAME}
ENV CIRCLE_PR_USERNAME=${CIRCLE_PR_USERNAME}
ENV CIRCLE_BRANCH=${CIRCLE_BRANCH}
ENV CIRCLE_SHA1=${CIRCLE_SHA1}

RUN apk update && apk add bash git

RUN mkdir -p /bot-arena/cci/pipeline

COPY run.sh /bot-arena/cci
RUN chmod +x /bot-arena/cci/run.sh

VOLUME /bot-arena/cci/pipeline

WORKDIR /bot-arena

CMD [""]
